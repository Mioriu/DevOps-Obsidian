## ![](https://ucarecdn.stepik.net/f415f115-feb5-4f4b-8e0f-0e3b92e1134d/)

## Команда grep — регулярные выражения

В прошлом уроке мы рассмотрели базовые возможности команды **grep**. Теперь поговорим о её главной суперсиле — использовании **регулярных выражений (regular expressions)**. Именно они позволяют выполнять сложный и точный поиск текста по различным шаблонам.

### Что такое регулярные выражения?

**Регулярные выражения (или regex)** — это специальные шаблоны, с помощью которых можно описывать не просто отдельные слова, а целые группы символов, шаблоны строк и сложные поисковые условия.

С помощью регулярных выражений можно находить, например:

- строки, начинающиеся или заканчивающиеся определённым символом или набором символов;
- текст, содержащий цифры, буквы в определённом порядке;
- слова, совпадающие с заданным шаблоном;
- и многое другое.

### Как использовать регулярные выражения с grep?

По умолчанию `grep` поддерживает базовый набор регулярных выражений. Вот простой пример:

```perl
grep "^Linux" notes.txt
```

Эта команда найдёт все строки, начинающиеся со слова `Linux`.

### Основы регулярных выражений

Несколько ключевых элементов регулярных выражений:

- `^` — начало строки
- `$` — конец строки
- `.` — любой одиночный символ (кроме переноса строки)
- `*` — повторение предыдущего символа 0 или больше раз
- `[]` — диапазон символов (например, `[a-z]` или `[0-9]`)
- `\` — экранирование специального символа

Рассмотрим примеры:

#### Пример 1. Поиск по началу строки (^)

```lua
grep "^Error" log.txt
```

Эта команда найдёт все строки, начинающиеся со слова `Error`:

```vbnet
Error: unable to open file
Error: connection failed
```

#### Пример 2. Поиск по концу строки ($)

```lua
grep "completed$" tasks.log
```

Выведет строки, оканчивающиеся словом `completed`:

```iecst
Task 123 completed
Backup completed
```

#### Пример 3. Любой символ (.)

Точка `.` соответствует любому символу:

```perl
grep "c.t" words.txt
```

Эта команда найдёт слова вроде:

```bash
cat
cut
cot
```

#### Пример 4. Диапазон символов ([])

```perl
grep "file[0-9].txt" list.txt
```

Найдёт все строки с текстом вроде:

```undefined
file1.txt
file2.txt
file9.txt
```

#### Пример 5. Повторения (*)

Звёздочка `*` повторяет предыдущий символ 0 или больше раз:

```lua
grep "doc.*txt" files.log
```

Будут найдены строки:

```javascript
doc.txt
document.txt
doc_v2_final.txt
```

### Расширенные регулярные выражения

По умолчанию grep использует базовые регулярные выражения (BRE). Чтобы использовать расширенные регулярные выражения (ERE), укажите ключ `-E`:

```perl
grep -E "pattern" file.txt
```

Расширенные регулярные выражения позволяют использовать дополнительные возможности:

- `|` — или (логическое OR)
- `()` — группировка
- `+` — одно или более повторений
- `?` — ноль или одно повторение (необязательно)

#### Пример расширенного выражения с «или» (|)

```perl
grep -E "error|failed|denied" syslog
```

Будут найдены строки, содержащие любое из указанных слов:

```nginx
Access denied
Operation failed
Network error
```

#### Пример использования группировки и повторения (+)

```perl
grep -E "(ha)+" laughter.txt
```

Найдёт строки с повторяющимся шаблоном «ha»:

```nginx
haha
hahaha
hahahahaha
```

### Экранирование спецсимволов

Если вам нужно найти символ, который является специальным (например, точку или звёздочку), используйте обратный слэш `\`:

```perl
grep "version\.txt" files.txt
```

Эта команда найдёт именно строки с «version.txt», а не «versionAtxt» или «version1txt».

### Полезные опции grep с регулярными выражениями

- `-i` — игнорировать регистр букв
- `-r` — рекурсивный поиск в каталогах
- `-E` — использовать расширенные регулярные выражения
- `-v` — инвертированный поиск (строки, не подходящие под шаблон)
- `-n` — отображение номеров строк

## Итог

Использование регулярных выражений с командой `grep` значительно расширяет её возможности и делает поиск по текстам более мощным и гибким. Теперь вы можете эффективно фильтровать и находить информацию даже в больших объёмах данных.

В следующем уроке мы закрепим эти знания на практике и разберём примеры регулярных выражений, часто используемых в реальной работе.