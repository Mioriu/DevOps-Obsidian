## ![](https://ucarecdn.stepik.net/cfd0e9e7-d0c3-43d9-a6cd-f65da7ae2153/)

### Что такое управляющие конструкции?

**Управляющие конструкции** в Bash позволяют выполнять разные действия в зависимости от условий или многократно повторять одни и те же команды (циклы). Основные управляющие конструкции Bash:

- **Условные операторы** (if-else, case)
- **Циклы** (for, while, until)

Давайте подробно разберём каждую из них.

### Условный оператор if

Конструкция `if` используется для проверки условия и выполнения команд в зависимости от результата проверки:

```bash
#!/bin/bash

AGE=18

if [ $AGE -ge 18 ]; then
    echo "Вы совершеннолетний"
else
    echo "Вы несовершеннолетний"
fi
```

**Обратите внимание:**

- `-ge` означает «больше или равно» (greater or equal).
- Условие всегда заключается в квадратные скобки с пробелами: `[ условие ]`.
- Конструкция закрывается командой `fi` (обратное написание `if`).

### ![](https://ucarecdn.stepik.net/8fd7dc04-9de9-4c72-af22-cacd7cd0b008/)

Для проверки более сложных условий вы можете использовать логические операторы:

- `&&` — логическое И (оба условия должны быть истинны).
- `||` — логическое ИЛИ (хотя бы одно условие истинно).

Пример с логическим оператором:

```bash
#!/bin/bash

NAME="Анна"
AGE=25

if [ "$NAME" = "Анна" ] && [ $AGE -gt 20 ]; then
    echo "Это Анна старше 20 лет."
else
    echo "Это не Анна или ей 20 лет и меньше."
fi
```

```bash
# В POSIX-стиле: [ … ]  (устаревшие -a / -o, лучше не использовать)
# В bash-стиле:  [[ … ]] (рекомендуется)
A=foo; B=bar
if [[ "$A" == "foo" || "$B" == "baz" ]]; then
  echo "ИЛИ с ||"
fi
```

> **Примечание:** `[[ … ]]` поддерживает `||` и `&&`; в старом синтаксисе `[` … `]` “ИЛИ” — `-o`, но это путано и местами недоступно → **рекомендуем `[[ … ]]`**.

### ![](https://ucarecdn.stepik.net/aec0549a-013b-4f95-983a-f1383fc18d1e/)

Конструкция `case` используется для выбора варианта действия в зависимости от значения переменной:

```bash
#!/bin/bash

FRUIT="яблоко"

case $FRUIT in
    "яблоко")
        echo "Это яблоко";;
    "банан")
        echo "Это банан";;
    *)
        echo "Неизвестный фрукт";;
esac
```

- `;;` обозначает конец каждого варианта.
- `*)` используется как вариант по умолчанию (если не подошёл ни один вариант).
- Закрывается конструкция командой `esac` (case наоборот).

### ![](https://ucarecdn.stepik.net/ae3e1737-79a7-49e4-a149-73107df22c3e/)

Циклы используются для повторения одних и тех же команд несколько раз.

#### Цикл for

Цикл `for` позволяет повторить действие для каждого элемента из списка:

```bash
#!/bin/bash

for NAME in Анна Максим Ольга
do
    echo "Привет, $NAME!"
done
```

Вывод:

```undefined
Привет, Анна!
Привет, Максим!
Привет, Ольга!
```

#### Цикл while

Цикл `while` выполняется, пока истинно заданное условие:

```bash
#!/bin/bash

COUNT=1

while [ $COUNT -le 5 ]
do
    echo "Повторение номер $COUNT"
    ((COUNT++))
done
```

Здесь:

- `-le` — «меньше или равно» (less or equal).
- `((COUNT++))` увеличивает переменную на 1.

Вывод:

```undefined
Повторение номер 1
Повторение номер 2
Повторение номер 3
Повторение номер 4
Повторение номер 5
```

#### Цикл until

Цикл `until` похож на `while`, но выполняется, пока условие НЕ станет истинным:

```bash
#!/bin/bash

COUNT=1

until [ $COUNT -gt 3 ]
do
    echo "Текущее значение: $COUNT"
    ((COUNT++))
done
```

Вывод:

```undefined
Текущее значение: 1
Текущее значение: 2
Текущее значение: 3
```

Примеры: 

```bash
# while: выполняется, пока условие ИСТИННО (проверяется ДО тела)
COUNT=1
while [ "$COUNT" -le 3 ]; do
  echo "$COUNT"
  (( COUNT++ ))
done

# until: выполняется, пока условие ЛОЖНО (останавливается, когда станет истинным)
N=3
until [ "$N" -le 0 ]; do
  echo "$N"
  (( N-- ))
done
```

#### Арифметика: ((…)) и let

```bash
I=0
(( I++ ))        # инкремент (bash-арифметика)
let "I++"        # то же с let
(( I+=1 ))       # прибавить 1
```

**Замечание**: в `(( … ))` допускаются пробелы; в простом присваивании пробелы вокруг `=` нельзя.

#### Справка по числовым операторам test 

```iecst
-eq  равно        -ne  не равно
-gt  больше       -lt  меньше
-ge  ≥             -le  ≤
```

#### ⚠️Технические фиксы (чтобы «копировалось и работало»)⚠️

- Всегда используйте блоки:
    
- ```undefined
    …код…
    ```
    
    — без “умных” кавычек (“ ”) и тире (—). Только обычные `"`, `'`, `-`.
    
- Следите за пробелами в `[` … `]`: **обязательны** пробелы после `[` и перед `]`.
    
- В пояснениях не вклеивайте невидимые символы/неразрывные пробелы.
    
- Для русских кавычек не используем «ёлочки» в коде — только ASCII-кавычки.