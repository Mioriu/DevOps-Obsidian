а## ![](https://ucarecdn.stepik.net/a7cbdd2f-a57f-432e-93b0-1f9c315f6358/)

В Linux для управления процессами используется мощный механизм — **сигналы**. Они позволяют взаимодействовать с процессами, останавливать их, перезапускать, корректно завершать работу или выполнять специфические действия в зависимости от ситуации.

### Что такое сигналы?

**Сигнал** — это специальное уведомление, отправляемое процессу для того, чтобы вызвать немедленную реакцию, например, завершение работы или перезагрузку конфигурации. Сигналы могут быть отправлены операционной системой, другим процессом или пользователем.

### Типы сигналов в Linux

Всего в Linux существует **64 сигнала**, однако наиболее активно используются около десятка из них. Каждый сигнал имеет своё имя и числовой идентификатор.

Самые распространённые сигналы:

- **SIGHUP (1)** — уведомление о разрыве соединения или запрос перезагрузки конфигурации.
- **SIGINT (2)** — прерывание с клавиатуры (`Ctrl+C`).
- **SIGQUIT (3)** — завершение процесса с генерацией дампа памяти (`Ctrl+\`).
- **SIGKILL (9)** — безусловное завершение процесса (нельзя перехватить или проигнорировать).
- **SIGTERM (15)** — запрос на корректное завершение процесса.
- **SIGSTOP (19)** — остановка выполнения процесса (аналогично `Ctrl+Z`, нельзя игнорировать).
- **SIGCONT (18)** — продолжение выполнения ранее остановленного процесса.
- **SIGUSR1 (10)** и **SIGUSR2 (12)** — пользовательские сигналы, реакция на них определяется самим приложением.

> ⚡ Мини-шпаргалка сигналов
> 
> ```bash
> kill -l                   # список сигналов
> kill -9 PID               # принудительное завершение (SIGKILL)
> kill -15 PID              # корректное завершение (SIGTERM)
> kill -1 PID               # перезапуск конфигурации (SIGHUP)
> Ctrl+C → SIGINT           # прерывание
> Ctrl+Z → SIGTSTP          # остановка
> fg / bg                   # продолжение процесса
> ```

### Полный список сигналов

Чтобы увидеть полный список из всех доступных 64 сигналов, воспользуйтесь командой:

```bash
kill -l
```

Она выведет названия всех сигналов с их номерами.

### Отправка сигналов процессам

Для отправки сигналов используется команда `kill`:

```bash
kill -сигнал PID
```

Примеры использования:

- Отправить процессу сигнал завершения **SIGTERM** (стандартный способ):
    
    ```bash
    kill -15 1234
    # или просто
    kill 1234
    ```
    
- Безусловно завершить процесс (если SIGTERM не сработал):
    
    ```bash
    kill -9 1234
    ```
    
- Перезагрузка конфигурации демона, например nginx:
    
    ```bash
    kill -1 $(pidof nginx)
    ```
    

### Разница между SIGTERM и SIGKILL

- **SIGTERM (15)** — просит процесс завершиться корректно, давая возможность сохранить данные, закрыть файлы и освободить ресурсы.
- **SIGKILL (9)** — принудительно завершает процесс без возможности корректного завершения. Процесс не может его игнорировать или перехватывать.

Используйте **SIGKILL** только тогда, когда процесс не реагирует на **SIGTERM**.

### Использование сигналов в терминале

Некоторые сигналы можно отправлять напрямую с помощью комбинаций клавиш:

- **Ctrl+C** — отправляет **SIGINT**, прерывая текущий процесс.
- **Ctrl+Z** — отправляет **SIGTSTP**, останавливая процесс (можно продолжить командой `fg` или `bg`).
- **Ctrl+\** — отправляет **SIGQUIT**, завершает процесс и генерирует дамп памяти.

### Отслеживание реакции процессов на сигналы

Если процесс игнорирует сигнал, полезно посмотреть, что он делает, с помощью утилиты `strace`:

```css
strace -p PID
```

Эта команда покажет системные вызовы процесса, помогая понять, почему сигнал игнорируется.

### Обработка сигналов в Bash-скриптах

В скриптах Bash можно перехватывать сигналы с помощью команды `trap`, чтобы выполнять нужные действия перед завершением:

```bash
#!/bin/bash

trap 'echo "Получен сигнал завершения"; exit' SIGTERM SIGINT

while true; do
    echo "Работаем..."
    sleep 1
done
```

При получении сигнала завершения (например, Ctrl+C), скрипт выполнит указанную команду и завершится.

### Отправка сигналов группе процессов

Команда `killall` позволяет отправить сигнал сразу группе процессов с определённым именем:

- Завершение всех процессов по имени:
    
    ```nginx
    killall firefox
    ```
    
- Перезагрузка конфигурации всех процессов nginx:
    
    ```nginx
    killall -SIGHUP nginx
    ```
    

### Типичные сценарии использования сигналов

- Перезагрузка конфигураций серверов и демонов без их остановки (SIGHUP).
- Завершение зависших или некорректно работающих процессов (SIGTERM, затем SIGKILL).
- Приостановка процессов на время диагностики и последующее продолжение (SIGSTOP, SIGCONT).
- Использование пользовательских сигналов (SIGUSR1, SIGUSR2) для специфических действий в приложениях.

Теперь вы знаете, какие сигналы существуют в Linux, как их отправлять, и как процессы могут на них реагировать. Использование сигналов значительно расширяет возможности управления и администрирования Linux-систем.