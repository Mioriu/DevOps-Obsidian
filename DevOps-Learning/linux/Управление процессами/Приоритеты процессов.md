## ![](https://ucarecdn.stepik.net/8efe985b-62f5-4c4f-bda0-1244533b21f5/)

Приоритеты процессов — это механизм, с помощью которого Linux определяет, какие процессы должны получать больше или меньше ресурсов процессора. Правильно управляя приоритетами, вы можете существенно повысить производительность системы и обеспечить её стабильную работу даже под высокой нагрузкой.

### Что такое приоритет процесса?

Приоритет процесса в Linux — это численное значение, которое определяет, сколько процессорного времени выделяется процессу по сравнению с другими процессами. Чем выше приоритет процесса, тем больше ресурсов CPU он получает.

Linux использует два основных понятия приоритета:

- **Nice (от -20 до +19)** — пользовательский приоритет процесса, которым вы можете управлять.
- **Realtime Priority (от 0 до 99)** — приоритеты реального времени, обычно применяются только для специальных задач.

### Nice-приоритеты

Параметр **nice** определяет пользовательский приоритет процессов:

- **-20** — **самый высокий приоритет (больше процессорного времени).**
- **0** — нормальный приоритет (по умолчанию). **Значения ниже 0 (отрицательные nice) доступны только root.**
- **+19** — самый низкий приоритет (меньше процессорного времени).

Запускать процессы с отрицательным nice (высоким приоритетом) может только суперпользователь (`root`).

### Просмотр приоритетов процессов

Чтобы узнать текущий nice-приоритет процессов, используйте команду:

```bash
ps -eo pid,cmd,nice --sort=nice
```

Пример вывода:

```swift
  PID CMD                         NI
 1234 /usr/bin/firefox            0
 1345 /usr/bin/python script.py  10
 2341 /usr/bin/nginx            -10
```

### Запуск процесса с определённым приоритетом (nice)

Запустить новый процесс с заданным nice-приоритетом можно так:

- Запуск с низким приоритетом (+10):
    
    ```bash
    nice -n 10 ./backup.sh
    ```
    
- Запуск с высоким приоритетом (-10, требует root-прав):
    
    ```bash
    sudo nice -n -10 ./high_priority_task.sh
    ```
    

Если вы не укажете значение, по умолчанию будет использован приоритет +10:

```bash
nice ./my_script.sh
```

### Изменение приоритета работающего процесса (renice)

Вы можете изменить nice-приоритет уже запущенного процесса с помощью команды `renice`:

- Повысить приоритет (уменьшить значение nice) процесса с PID 1234 (требуются права root):
    
    ```bash
    sudo renice -n -5 -p 1234
    ```
    
- Понизить приоритет процесса текущего пользователя:
    
    ```css
    renice -n 15 -p 1234
    ```
    
- Изменить приоритет всех процессов конкретного пользователя:
    
    ```bash
    sudo renice -n 5 -u username
    ```
    

### Realtime-приоритеты

Realtime-приоритеты (от 0 до 99) используются редко и предназначены для специальных задач, таких как обработка звука или видео в реальном времени.

Чтобы запустить процесс с realtime-приоритетом, используется команда `chrt`:

- Запуск процесса с realtime-приоритетом 80 (требуются root-права):
    
    ```bash
    sudo chrt -f 80 ./realtime_process.sh
    ```
    
- Просмотр realtime-приоритета запущенного процесса:
    
    ```css
    chrt -p PID
    ```
    

**Важно:** Будьте осторожны с realtime-приоритетами, так как неправильно установленный realtime-приоритет может привести к полной блокировке системы.

### Когда изменять приоритеты?

Типичные сценарии управления приоритетами:

- **Снижение приоритета для фоновых задач:** резервное копирование, архивация, долгие вычисления.
- **Повышение приоритета критичных задач:** веб-сервер, база данных, мультимедийные приложения.
- **Использование realtime-приоритетов:** только для специальных задач (например, профессиональная обработка аудио/видео).