### Тезисно: Расширенная настройка, управление и диагностика сети

**1. Расширенная настройка интерфейсов (Гибкое управление)**

- **Мультиадресация:** Одной сетевой карте можно назначить несколько IP (`ip addr add 192.168.1.101/24 dev eth0`) для доступа к разным подсетям или хостинга сайтов.
    
- **Тонкая настройка:**
    
    - **MTU:** Изменение размера пакета (`ip link set mtu 1400`) для VPN или Jumbo Frames.
        
    - **MAC:** Смена аппаратного адреса (`ip link set address 00:11...`) для тестов или обхода ограничений провайдера.
        
- **Сложная маршрутизация:** Управление приоритетами через **метрики** (основной и резервный шлюзы) и добавление статических маршрутов (`ip route add 10.0.0.0/8 via 192.168.1.254`).
    
- **ARP-таблица:** Кэш соответствия IP и MAC. Просмотр (`ip neigh`) и сброс (`ip neigh flush`) для решения проблем с "доступностью" узлов в локальной сети.
    
- **Виртуализация сети:**
    
    - **Мосты (bridge):** Объединяют интерфейсы (например, для связи VirtualBox/сети хоста).
        
    - **VLAN:** Логическое разделение одной физической сети на сегменты.
        
    - **Туннели (GRE):** Соединение удаленных сетей через интернет.
        

**2. NetworkManager (Автоматизация и удобство)**

- **Роль:** Фоновая служба, которая автоматически управляет подключениями (переключение Wi-Fi/Ethernet, запоминание паролей, запуск VPN). Стандарт в современных дистрибутивах.
    
- **Профили подключений:** Вместо правки файлов создаются профили ("Дом", "Офис") с разными настройками (IP, DNS, VPN). NetworkManager сам активирует нужный при подключении к сети.
    
- **Инструменты управления:**
    
    - `nmcli` — мощная командная строка (скрипты, серверы). Пример: `nmcli dev wifi connect "SSID" password "..."`
        
    - `nmtui` — псевдографический интерфейс в терминале (удобно по SSH).
        
    - GUI-апплеты — значок в трее для обычных пользователей.
        
- **Где хранит настройки:** В `/etc/NetworkManager/system-connections/` (редактировать вручную не рекомендуется).
    

**3. Диагностика сети (Поиск проблем)**

- **Проверка связности:** `ping` (доступен ли хост, задержки, потери пакетов).
    
- **Маршрут:** `traceroute` / `tracepath` показывают цепочку устройств до цели и на каком "прыжке" пакеты теряются или растет задержка.
    
- **Порты и сервисы:** `nmap` (сканирование открытых портов, например `nmap -p 80,443 example.com`), `ss` (просмотр активных соединений и слушающих портов, замена `netstat`).
    
- **DNS:** `dig`, `host`, `nslookup` для проверки разрешения имен (например, `dig example.com MX` для почтовых записей).
    
- **Мониторинг в реальном времени:** `iftop` (трафик по хостам), `nethogs` (трафик по процессам), `tcpdump` (глубокий анализ пакетов).
- [[Конфигурация сетевых интерфейсов - расширенная настройка]] [[NetworkManager]] [[Инструменты диагностики сети - часть 1]]